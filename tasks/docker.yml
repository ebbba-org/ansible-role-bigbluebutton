---

- name: ensure pip is installed
  apt:
    name:
      - python3-pip
      - python3-setuptools
    state: "{{ bbb_state }}"

- name: install python docker packages
  pip:
    name:
      - docker
      - "docker-compose=={{ bbb_docker_compose_version }}"
    state: "{{ bbb_state }}"

- name: Log into DockerHub (avoid rate limits)
  docker_login:
    username: "{{ bbb_docker_user }}"
    password: "{{ bbb_docker_passwd }}"
  when: bbb_docker_user and bbb_docker_passwd
